## Transaction Script
- UI에서 모든 처리를 하도록 하는 형태로 구성된 것을 Smart UI라고 하고 백엔드에서 UI는 Controller이기 때문에 Smart Controller 라고도 한다
- 서비스 레이어에서 모든 분기를 처리하면 테스트하기도 힘들고 객체 지향적인 코드도 아니다. 서비스 코드가 비즈니스 로직을 들고 있기 때문에 생기는 현상
- 서비스 레이어를 가볍게 만들기 위해 각 작업을 모두 도메인 객체로 위임하도록 한다 -> 비즈니스 로직을 도메인으로 넘긴다
- 도메인 객체와 도메인 서비스에서 비즈니스 로직의 책임을 가지고 어플리케이션 서비스에서는 해당 로직을 조정한다

## 어디까지 추상화 해야 할까?
모듈을 격리하고 인터페이스로 만드는 과정
![](https://i.imgur.com/wuIj43g.png)
목표로 하는 추상화 구조
- 서비스는 한 번 만들어지면 평생 같은 기능을 수행하기 때문에 굳이 추상화 할 필요 없음
- `Repository`는 구현체가 바뀌면 서비스 수정 없이 그대로 사용할 수 있도록 추상화 필요
	- JPA를 쓰다가 MongoDB로 바꾸면? -> 추상화가 되어있지 않다면 서비스 코드까지 모두 바꿔야 함
	- 하지만 위 구조를 사용하면 `Repository`를 구현만 해서 갈아 끼면 그대로 사용 가능
	- 또한 인프라 계층은 Fake Repository를 끼워 넣을 수도 있기 때문에 테스트 코드 작성 시에도 매우 유리

**항상 테스트하기 좋은 코드가 좋은 설계일 확률이 높다는 것을 생각하자**
